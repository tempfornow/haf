<!DOCTYPE html>
<html>
   
   <head>
		<script src = "./src/lib/angular.min.js"></script>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-rtl.min.css">
   </head>
   
   <body ng-app = "myapp">
      
        <div ng-controller = "SoldiersController" class="container">
			
			
			<!-- Add soldiers section -->
			<div class="row">
				<div class = "page-header"><h2>מערכת לניהול חיילים</h2></div>
				<div class = "panel panel-primary col-lg-9 col-lg-offset-1">
				
					<div class = "panel-body">
						<form name = "soldierForm">
						
							<!-- Name -->
							<div class = "form-group" ng-class = "{ 'has-error' : soldierForm.name.$invalid && 
									soldierForm.name.$error.required }">
								<label>שם:</label>
								<input name = "name" type = "text" class="form-control" ng-model = "name" required>
								<p 	class = "help-block"
									ng-show = "	 
									soldierForm.name.$invalid && 
									soldierForm.name.$error.required">יש להזין שם</p>
							</div>
							
							<!-- Age -->
							<div class = "form-group" ng-class = "{ 'has-error' : !soldierForm.age.$dirty }">
								<label>גיל:</label>
								<select name = "age" class = "form-control input-sm" 
									ng-options="age for age in validAges" ng-model="age"></select>
								<p ng-show = "!soldierForm.age.$dirty" class = "help-block">יש להזין גיל</p>	
								
							</div>
							
							<!-- Rank -->
							<div class = "form-group" ng-class = "{ 'has-error' : !soldierForm.rank.$dirty }">
								<label>דרגה:</label>
								<select name = "rank" class="form-control" 
									ng-options="rank for rank in validRanks" ng-model="rank"></select>
								<p ng-show = "!soldierForm.rank.$dirty" class = "help-block">יש להזין דרגה</p>
							</div>
							
							<!-- Discharge date -->
							<div class = "form-group"  ng-class = "{ 'has-error' : soldierForm.discharge.$invalid && 
									soldierForm.discharge.$error.required }">
								<label for = "discharge">תת"ש</label>
								<input name = "discharge" type="text" class = "form-control" ng-model = "discharge" required>
								<p 	class = "help-block"
									ng-show = "soldierForm.discharge.$invalid && 
									soldierForm.discharge.$error.required">יש להזין תת"ש</p>
							</div>
							
							<button class="btn btn-default" 
								ng-click = "addSoldier(name,age,rank,discharge)"
								ng-disabled = "!soldierForm.rank.$dirty || 
									!soldierForm.age.$dirty ||
									soldierForm.discharge.$invalid ||
									soldierForm.name.$invalid">הוספה</button>
						</form>
					</div>
				</div>
			</div>
			
			<!-- Soldiers table-->
			<div class="row">
				<table class="table table-striped col-lg-6 col-lg-offset-3">
					<thead>
						<tr>
							<th>שם</th>
							<th>גיל</th>
							<th>דרגה</th>
							<th>תאריך שחרור</th>
						</tr>
					</thead>
					<tr ng-repeat = "soldier in soldiersList">
						
						<td>{{soldier.name}}</td>
						<td>{{soldier.age}}</td>
						<td>{{soldier.rank}}</td>
						<td>{{soldier.discharge}}</td>
					</tr>
				</table>
			</div>
		</div>
      
      <script>
         angular.module("myapp", [])
         
         .controller("SoldiersController", function($scope) {
			<!-- Initial soldiers list -->
            $scope.soldiersList = []
			<!-- List of valid ages(valid age of a soldier) -->
			$scope.validAges = _.range(18,121)
			$scope.validRanks = ['קמ"א','קא"ב',
				'טוראי','רב"ט','סמל','סמ"ר','רס"ל','רס"ר','רס"ם','רס"ב','רנ"ם','רנ"ג',
				'סג"ם','סגן','סרן','רס"ן','סא"ל','אל"מ','תא"ל','אלוף','רא"ל']
			<!-- list of ranks -->
			<!-- Adds soldier according to given data about him -->
			$scope.addSoldier = function(name,age,rank,discharge) {
				$scope.soldiersList.push({name,age,rank,discharge})
			}

         });
      </script>
      
	  
      <script src = "./src/lib/lodash.min.js"></script>
	  <script src = "./src/lib/jquery.min.js"></script>
	  <script src = "./src/lib/bootstrap.min.js"></script>
   </body>
</html>